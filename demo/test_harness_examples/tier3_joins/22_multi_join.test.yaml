application: multi_join_demo
description: Test multi-table JOIN enrichment
default_timeout_ms: 60000

queries:
  # Join query: Enrich orders with customer and product data
  # File sources (customers, products) are loaded from config files in SQL
  - name: fully_enriched
    description: Verify multi-table join enriches from both customer and product sources
    inputs:
      - source: orders
        schema: order_event
        records: 100
    assertions:
      - type: record_count
        equals: 100
      - type: schema_contains
        fields: [order_id, customer_id, product_id, quantity, order_total, customer_name, customer_tier, product_name, product_category]
      - type: no_nulls
        fields: [order_id, customer_id, product_id, quantity, order_total]
    timeout_ms: 60000
